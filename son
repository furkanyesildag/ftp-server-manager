from PyQt5.QtWidgets import QApplication, QMainWindow, QWidget, QHBoxLayout, QVBoxLayout, QFileDialog
from PyQt5.QtMultimedia import QMediaPlayer, QMediaPlaylist, QMediaContent
from PyQt5.QtMultimediaWidgets import QVideoWidget # QVideoWidget sınıfını ekledik
from PyQt5.QtWidgets import QApplication, QMainWindow, QPushButton, QHBoxLayout, QVBoxLayout, QWidget


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        # UI oluştur
        widget = QWidget()
        layout = QHBoxLayout()
        widget.setLayout(layout)

        left_layout = QVBoxLayout()
        right_layout = QVBoxLayout()

        layout.addLayout(left_layout)
        layout.addLayout(right_layout)

        # Video player oluştur
        self.media_player = QMediaPlayer()
        video_widget = QVideoWidget() # QVideoWidget objesi oluşturduk
        self.media_player.setVideoOutput(video_widget) # QMediaPlayer nesnesi için videoWidget fonksiyonu yerine videoOutput fonksiyonunu kullandık
        
        # Sol tarafta görünecek butonları oluştur
        self.add_video_button = QPushButton("Video Ekle")
        self.add_video_button.clicked.connect(self.add_video_to_playlist)

        self.play_button = QPushButton("Oynat")
        self.play_button.clicked.connect(self.play_video)

        self.pause_button = QPushButton("Duraklat")
        self.pause_button.clicked.connect(self.pause_video)

        self.stop_button = QPushButton("Durdur")
        self.stop_button.clicked.connect(self.stop_video)

        left_layout.addWidget(self.add_video_button)
        left_layout.addWidget(self.play_button)
        left_layout.addWidget(self.pause_button)
        left_layout.addWidget(self.stop_button)

        # Video player'ın ekleneceği layout'u oluştur
        video_layout = QVBoxLayout()
        video_layout.addWidget(video_widget) # video_widget objesini video layout'a ekliyoruz
        right_layout.addLayout(video_layout)

        self.setCentralWidget(widget)

    def add_video_to_playlist(self):
        file_name, _ = QFileDialog.getOpenFileName(self, "Video Ekle", "", "Video Files (*.mp4 *.flv *.ts *.mts *.avi)")
        if file_name != '':
            self.media_player.setMedia(QMediaContent(QUrl.fromLocalFile(file_name)))

    def play_video(self):
        self.media_player.play()

    def pause_video(self):
        self.media_player.pause()

    def stop_video(self):
        self.media_player.stop()

if __name__ == "__main__":
    app = QApplication([])
    window = MainWindow()
    window.show()
    app.exec_()
